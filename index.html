<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Á¶èÊ∞îÁ†îÁ©∂ÊâÄ ¬∑ Â£ÅÁ∫∏ÁÅµÊÑü</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'Georgia', serif;
  background: linear-gradient(160deg, #fff8f0 0%, #fdebd0 60%, #fff0e8 100%);
  min-height: 100vh;
  color: #5a2a10;
}

header {
  text-align: center;
  padding: 36px 20px 20px;
}
.logo { font-size: 2rem; font-weight: 900; color: #c0380a; letter-spacing: 8px; text-shadow: 0 2px 12px #ffcc8050; }
.sub  { font-size: 0.78rem; color: #e07030; letter-spacing: 4px; margin-top: 6px; }

.search-wrap {
  display: flex; flex-direction: column;
  align-items: center; gap: 14px;
  padding: 16px 20px 20px;
}
.search-row {
  display: flex; gap: 10px;
  width: 100%; max-width: 560px;
}
.search-row input {
  flex: 1; padding: 13px 22px;
  border: 2px solid #ffb07a; border-radius: 50px;
  font-size: 0.95rem; background: #fffaf5;
  color: #5a2a10; outline: none; font-family: inherit;
  transition: border 0.2s;
}
.search-row input:focus { border-color: #c0380a; }
.search-row button {
  padding: 13px 26px;
  background: linear-gradient(135deg, #ff6b35, #c0380a);
  color: #ffd740; border: none; border-radius: 50px;
  font-size: 0.95rem; font-weight: bold; cursor: pointer;
  box-shadow: 0 4px 16px #c0380a35; transition: transform 0.15s, box-shadow 0.15s;
  font-family: inherit; letter-spacing: 1px;
}
.search-row button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px #c0380a45; }
.search-row button:active { transform: none; }

.tags {
  display: flex; flex-wrap: wrap;
  gap: 8px; justify-content: center;
  max-width: 620px;
}
.tag {
  padding: 6px 16px; border-radius: 50px;
  background: #fff3e0; border: 1.5px solid #ffb07a;
  color: #b03000; font-size: 0.78rem; cursor: pointer;
  transition: all 0.2s; letter-spacing: 0.5px;
  user-select: none;
}
.tag:hover  { background: #fde0c0; border-color: #c0380a; }
.tag.active { background: #c0380a; color: #ffd740; border-color: #c0380a; }

.loading {
  display: none; text-align: center;
  padding: 50px 20px; color: #c0380a; letter-spacing: 3px; font-size: 0.9rem;
}
.spinner {
  width: 30px; height: 30px;
  border: 3px solid #ffd0a0; border-top-color: #c0380a;
  border-radius: 50%; animation: spin 0.8s linear infinite;
  margin: 0 auto 14px;
}
@keyframes spin { to { transform: rotate(360deg); } }

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 20px; padding: 8px 24px 60px;
  max-width: 1000px; margin: 0 auto;
}

.card {
  display: flex; flex-direction: column;
  align-items: center; gap: 0;
  cursor: pointer;
  transition: transform 0.2s;
}
.card:hover { transform: translateY(-5px); }

.phone {
  position: relative;
  width: 130px; height: 265px;
  background: #0e0e0e;
  border-radius: 24px;
  border: 3px solid #2a2a2a;
  overflow: hidden;
  box-shadow: 0 10px 30px #0003, 0 2px 6px #0002;
}
.phone::before {
  content: '';
  position: absolute; top: 9px;
  left: 50%; transform: translateX(-50%);
  width: 36px; height: 6px;
  background: #1a1a1a; border-radius: 10px; z-index: 10;
}
.phone-img {
  width: 100%; height: 100%;
  object-fit: cover; display: block;
  opacity: 0; transition: opacity 0.5s;
}
.phone-img.loaded { opacity: 1; }

.skeleton {
  position: absolute; inset: 0;
  background: linear-gradient(90deg, #f0d0b0 25%, #fde8c8 50%, #f0d0b0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.3s infinite;
}
@keyframes shimmer { to { background-position: -200% 0; } }

/* lock screen overlay */
.lock-ov {
  position: absolute; inset: 0; z-index: 5;
  background: linear-gradient(180deg, rgba(0,0,0,0.22) 0%, transparent 45%);
  display: flex; flex-direction: column;
  align-items: center; padding-top: 28px;
  pointer-events: none;
}
.l-time { color: #fff; font-size: 1.4rem; font-weight: 200; letter-spacing: 3px; text-shadow: 0 1px 8px #0007; }
.l-date { color: rgba(255,255,255,0.8); font-size: 0.46rem; letter-spacing: 1.5px; margin-top: 2px; }

.empty { text-align: center; padding: 60px 20px; color: #c09070; font-size: 0.9rem; grid-column: 1/-1; }

/* LIGHTBOX */
.lb-bg {
  display: none; position: fixed; inset: 0;
  background: rgba(10,2,0,0.75); z-index: 200;
  align-items: center; justify-content: center;
  backdrop-filter: blur(6px);
}
.lb-bg.open { display: flex; }
.lb-inner {
  position: relative; display: flex;
  flex-direction: column; align-items: center; gap: 16px;
}
.lb-phones { display: flex; gap: 20px; }
.lb-close {
  position: absolute; top: -40px; right: 0;
  color: #ffcc80; font-size: 1.6rem; cursor: pointer;
  border: none; background: none; line-height: 1;
}
.lb-prompt {
  background: rgba(255,248,240,0.12);
  border: 1px solid rgba(255,200,120,0.3);
  border-radius: 12px; padding: 10px 18px;
  color: #ffddaa; font-size: 0.72rem;
  max-width: 340px; text-align: center; line-height: 1.6;
}
</style>
</head>
<body>

<header>
  <div class="logo">Á¶èÊ∞îÁ†îÁ©∂ÊâÄ</div>
  <div class="sub">‚ú¶ ÊâãÊú∫Â£ÅÁ∫∏ÁÅµÊÑüÂ∫ì ‚ú¶</div>
</header>

<div class="search-wrap">
  <div class="search-row">
    <input id="kw" type="text" placeholder="ÊêúÁ¥¢Â£ÅÁ∫∏ÁÅµÊÑü‚Ä¶"/>
    <button onclick="doSearch()">ÁîüÊàê</button>
  </div>
  <div class="tags" id="tags"></div>
</div>

<div class="loading" id="loading">
  <div class="spinner"></div>
  Ê≠£Âú®Âè¨Âî§Â•ΩËøê‚Ä¶
</div>
<div class="gallery" id="gallery">
  <div class="empty">ÁÇπÂáª‰∏äÊñπÊ†áÁ≠æÔºåÂºÄÂßãÊé¢Á¥¢Â•ΩËøêÂ£ÅÁ∫∏ ‚ú®</div>
</div>

<!-- LIGHTBOX -->
<div class="lb-bg" id="lb" onclick="closeLb(event)">
  <div class="lb-inner">
    <button class="lb-close" onclick="document.getElementById('lb').classList.remove('open')">‚úï</button>
    <div class="lb-phones" id="lbPhones"></div>
    <div class="lb-prompt" id="lbPrompt"></div>
  </div>
</div>

<script>
const TAGS = [
  { label: 'üî¥ Lucky Koi',      prompt: 'red and gold koi fish swimming in clear blue water with lotus flowers, Chinese traditional painting style, ultra detailed, vibrant colors' },
  { label: 'üå∫ Peony Wealth',   prompt: 'lush pink and red peony flowers blooming, Chinese traditional gongbi painting, gold details, rich colors, elegant composition' },
  { label: 'üêâ Golden Dragon',  prompt: 'majestic golden Chinese dragon flying through clouds and mist, celestial, dramatic lighting, highly detailed scales, mythical' },
  { label: 'üßß God of Wealth',  prompt: 'Chinese God of Wealth Caishen in golden robes holding ingot, traditional deity illustration, ornate red and gold background, auspicious symbols' },
  { label: '‚òØ Guanyin',        prompt: 'Guanyin Bodhisattva sitting on lotus throne, soft golden light, serene expression, white robes, moonlit ocean background, divine atmosphere' },
  { label: 'ü™∑ Sacred Lotus',   prompt: 'pink lotus flowers blooming at sunrise over still water, soft golden reflections, peaceful Buddhist aesthetic, ultra detailed petals' },
  { label: 'ü¶ö Peacock',        prompt: 'magnificent peacock with fully spread iridescent feathers, jewel tones green blue gold, ornate decorative background, elegant and luxurious' },
  { label: 'üèÆ Red Lanterns',   prompt: 'glowing red Chinese lanterns floating in night sky above ancient temple rooftops, golden light, festive, warm atmosphere, ultra detailed' },
  { label: 'ü¶Å Pixiu',          prompt: 'golden Pixiu mythical beast standing on coins and treasure, auspicious Chinese creature, ornate golden background, wealth and protection symbols' },
  { label: 'üå∏ Peach Blossom',  prompt: 'delicate pink peach blossoms on branches against soft misty background, Chinese ink painting style, romantic, spring fortune, dreamy pastel' },
  { label: 'üåï Moon Goddess',   prompt: 'Chinese Moon Goddess Chang\'e in flowing white silk robes, full moon behind her, cherry blossoms falling, celestial ethereal beauty' },
  { label: 'üê¶ Phoenix',        prompt: 'magnificent Chinese phoenix Fenghuang in flight, fiery red orange gold plumage, celestial clouds, rebirth and good fortune symbolism' },
  { label: 'üíé Jade Fortune',   prompt: 'glowing green jade stone surrounded by gold coins and auspicious symbols, rich texture detail, mystical light, prosperity and luck' },
  { label: '‚≠ê Fortune Stars',  prompt: 'three Chinese lucky stars Fu Lu Shou deities in golden robes, warm glowing background, auspicious clouds, traditional illustration' },
  { label: 'üåä Ocean Wealth',   prompt: 'deep turquoise ocean waves with golden light rays, Chinese prosperity symbols hidden in water, majestic powerful, wealth flowing' },
  { label: 'üéã Bamboo Luck',    prompt: 'elegant green bamboo forest in morning mist, golden sunlight filtering through, Chinese ink wash style, peaceful and auspicious, zen' },
];

let selectedPrompt = '';
let currentImages  = [];
let selectedImg    = null;

// render tags
const tagWrap = document.getElementById('tags');
TAGS.forEach((t, i) => {
  const el = document.createElement('span');
  el.className = 'tag' + (i===0?' active':'');
  el.textContent = t.label;
  el.onclick = () => {
    document.querySelectorAll('.tag').forEach(x=>x.classList.remove('active'));
    el.classList.add('active');
    document.getElementById('kw').value = t.label;
    selectedPrompt = t.prompt;
    doSearch();
  };
  tagWrap.appendChild(el);
});

function doSearch() {
  const kw = document.getElementById('kw').value.trim();
  if (!kw) return;
  // use mapped prompt if available, else use kw directly
  const tag = TAGS.find(t=>t.label===kw);
  const prompt = tag ? tag.prompt : kw + ', beautiful auspicious Chinese style, phone wallpaper, ultra detailed 4K';
  selectedPrompt = prompt;
  generate(prompt, kw);
}

function generate(prompt, label) {
  document.getElementById('loading').style.display='block';
  document.getElementById('gallery').innerHTML='';

  const fullPrompt = prompt + ', phone wallpaper portrait 9:16, ultra detailed, 4K, beautiful composition, no text no watermark';
  currentImages = [];

  for (let i=0;i<8;i++) {
    const seed = Math.floor(Math.random()*999999);
    const url  = `https://image.pollinations.ai/prompt/${encodeURIComponent(fullPrompt)}?width=1080&height=1920&seed=${seed}&nologo=true&enhance=true`;
    currentImages.push({ url, seed, label, prompt: fullPrompt });
  }

  document.getElementById('loading').style.display='none';
  renderGallery();
}

function renderGallery() {
  const g = document.getElementById('gallery');
  g.innerHTML='';
  const now = new Date();
  const hh  = String(now.getHours()).padStart(2,'0');
  const mm  = String(now.getMinutes()).padStart(2,'0');

  currentImages.forEach((img,i) => {
    const card = document.createElement('div');
    card.className='card';
    card.onclick=()=>openLb(img);

    const phone = document.createElement('div');
    phone.className='phone';

    const sk = document.createElement('div');
    sk.className='skeleton';
    phone.appendChild(sk);

    const im = document.createElement('img');
    im.className='phone-img';
    im.src = img.url;
    im.alt = img.label;
    im.onload  = ()=>{ im.classList.add('loaded'); sk.remove(); };
    im.onerror = ()=>{ im.src=`https://picsum.photos/seed/${i}${Date.now()}/1080/1920`; im.classList.add('loaded'); sk.remove(); };
    phone.appendChild(im);

    const ov = document.createElement('div');
    ov.className='lock-ov';
    ov.innerHTML=`<div class="l-time">${hh}:${mm}</div><div class="l-date">February 22 ¬∑ Saturday</div>`;
    phone.appendChild(ov);

    card.appendChild(phone);
    g.appendChild(card);
  });
}

// LIGHTBOX
function openLb(img) {
  selectedImg = img;
  const now=new Date();
  const hh=String(now.getHours()).padStart(2,'0');
  const mm=String(now.getMinutes()).padStart(2,'0');

  const lbP = document.getElementById('lbPhones');
  lbP.innerHTML='';

  // lock screen
  const modes=[
    {type:'lock', w:110, h:224},
    {type:'home', w:110, h:224},
  ];
  modes.forEach(({type,w,h})=>{
    const ph=document.createElement('div');
    ph.className='phone';
    ph.style.width=w+'px'; ph.style.height=h+'px';

    const sk=document.createElement('div'); sk.className='skeleton'; ph.appendChild(sk);
    const im=document.createElement('img'); im.className='phone-img'; im.src=img.url;
    im.onload=()=>{im.classList.add('loaded');sk.remove();};
    ph.appendChild(im);

    if(type==='lock'){
      const ov=document.createElement('div'); ov.className='lock-ov';
      ov.innerHTML=`<div class="l-time" style="font-size:1rem">${hh}:${mm}</div><div class="l-date">February 22</div>`;
      ph.appendChild(ov);
    } else {
      const ov=document.createElement('div');
      ov.style.cssText='position:absolute;inset:0;z-index:5;display:grid;grid-template-rows:1fr auto;padding:12px 7px 7px;gap:4px;';
      let h2='<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:4px;align-content:start;padding-top:6px;">';
      for(let j=0;j<12;j++) h2+='<div style="aspect-ratio:1;background:rgba(255,200,170,.5);border-radius:7px;backdrop-filter:blur(3px)"></div>';
      h2+='</div><div style="display:grid;grid-template-columns:repeat(4,1fr);gap:4px;background:rgba(255,190,160,.35);border-radius:11px;padding:4px;backdrop-filter:blur(6px)">';
      for(let j=0;j<4;j++) h2+='<div style="aspect-ratio:1;background:rgba(255,200,180,.5);border-radius:7px"></div>';
      h2+='</div>';
      ov.innerHTML=h2; ph.appendChild(ov);
    }
    lbP.appendChild(ph);
  });

  // show original image URL for admin download
  document.getElementById('lbPrompt').innerHTML=
    `üå∏ ÈîÅÂ±è ¬∑ ‰∏ªÂ±è È¢ÑËßàÊïàÊûú<br/>
     <span style="opacity:0.6;font-size:0.65rem">seed: ${img.seed}</span>`;

  document.getElementById('lb').classList.add('open');
}

function closeLb(e) {
  if(e.target===document.getElementById('lb'))
    document.getElementById('lb').classList.remove('open');
}

// init
window.onload=()=>{
  const first=TAGS[0];
  document.getElementById('kw').value=first.label;
  selectedPrompt=first.prompt;
  generate(first.prompt, first.label);
};
</script>
</body>
</html>
